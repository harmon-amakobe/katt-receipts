<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, user-scalable=no"
    />
    <title>Katt Receipts</title>
    <link rel="stylesheet" href="assets/css/main.css" />
    <link rel="icon" href="images/logos/favicon.png" />
    <noscript
      ><link rel="stylesheet" href="assets/css/noscript.css"
    /></noscript>
  </head>
  <body class="is-preload">
    <div id="wrapper">
      <header id="header" class="alt">
        <a href="index.html" class="logo">
          <strong>Katt</strong>
          <span>Receipts</span>
        </a>
      </header>

      <section id="banner" class="major">
        <div class="inner">
          <iframe
            class="video"
            src="https://www.youtube.com/embed/8oRRZiRQxTs?autoplay=1"
            frameborder="0"
            allow="accelerometer; autoplay; encrypted-media; gyroscope;"
            allowfullscreen
          ></iframe>
        </div>
      </section>

      <div id="main">
        <div class="container">
          <div class="timeline">
            <div class="timeline-month">
              August, 2018
              <span>3 Entries</span>
              <button class="edit-month"><i class="fas fa-edit"></i></button>
            </div>
            <div class="timeline-section">
              <div class="timeline-date">21, Tuesday</div>
              <div class="row">
                <div class="col-sm-4">
                  <div class="timeline-box">
                    <div class="box-title">
                      <i
                        class="fa fa-asterisk text-success"
                        aria-hidden="true"
                      ></i>
                      Job Created
                    </div>
                    <div class="box-content">
                      <a class="btn btn-xs btn-default pull-right">Details</a>
                      <div class="box-item">
                        <strong>Loss Type</strong>: A/C Leak
                      </div>
                      <div class="box-item">
                        <strong>Loss Territory</strong>: Texas
                      </div>
                      <div class="box-item">
                        <strong>Start Date</strong>: 08/22/2018
                      </div>
                    </div>
                    <div class="box-footer">- Tyler</div>
                  </div>
                </div>
                <div class="col-sm-4">
                  <div class="timeline-box">
                    <div class="box-title">
                      <i class="fa fa-pencil text-info" aria-hidden="true"></i>
                      Job Edited
                    </div>
                    <div class="box-content">
                      <a class="btn btn-xs btn-default pull-right">Details</a>
                      <div class="box-item">
                        <strong>Project Manager</strong>: Marlyn
                      </div>
                      <div class="box-item">
                        <strong>Supervisor</strong>: Carol
                      </div>
                    </div>
                    <div class="box-footer">- Tyler</div>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <button class="add-item"><i class="fas fa-plus"></i>Add Item</button>
        </div>

        <footer id="footer">
          <div class="inner">
            <ul class="copyright">
              <li>
                &copy; <a href="https://harmon.amakobe.page">Harmon Amakobe</a>
              </li>
            </ul>
          </div>
        </footer>
      </div>

      <script src="assets/js/jquery.min.js"></script>
      <script src="assets/js/jquery.scrolly.min.js"></script>
      <script src="assets/js/jquery.scrollex.min.js"></script>
      <script src="assets/js/browser.min.js"></script>
      <script src="assets/js/breakpoints.min.js"></script>
      <script src="assets/js/util.js"></script>
      <script src="assets/js/main.js"></script>
      <script>
        // Wait for the DOM to be ready
        document.addEventListener("DOMContentLoaded", function () {
          // Function to add a new timeline item
          function addItem() {
            // Create a new timeline item
            var newItem = document.createElement("div");
            newItem.className = "timeline-section";
            newItem.innerHTML = `
					<div class="timeline-date">[New Date]</div>
					<div class="row">
						<div class="col-sm-4">
							<div class="timeline-box">
								<!-- ... content for the new item ... -->
							</div>
						</div>
					</div>
				`;
            // Append the new item to the timeline
            document.querySelector(".timeline").appendChild(newItem);
          }

          // Function to edit the month
          function editMonth() {
            // Implement your edit logic here
            alert("Edit month functionality goes here!");
          }

          // Event listener for the "Add Item" button
          document
            .querySelector(".add-item")
            .addEventListener("click", addItem);

          // Event listener for the "Edit" buttons in each month
          var editButtons = document.querySelectorAll(".edit-month");
          editButtons.forEach(function (button) {
            button.addEventListener("click", editMonth);
          });
        });
      </script>
      <!-- Add this script to the end of your HTML file, after other scripts -->
      <script>
        // Wait for the DOM to be ready
        document.addEventListener("DOMContentLoaded", function () {
          // Replace 'YOUR_VIDEO_ID' with the actual video ID
          var videoId = "8oRRZiRQxTs";

          // Load the YouTube Player API script
          var tag = document.createElement("script");
          tag.src = "https://www.youtube.com/iframe_api";
          var firstScriptTag = document.getElementsByTagName("script")[0];
          firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

          // Variables to store video player and timeline-month element
          var player;
          var timelineMonthElement;

          // Function to create a timeline-month element
          function createTimelineMonth(timestamp) {
            // Create a new timeline-month element
            timelineMonthElement = document.createElement("div");
            timelineMonthElement.className = "timeline-month";
            timelineMonthElement.innerHTML = `
        ${getMonthYearString(timestamp)}
        <span>3 Entries</span>
        <button class="edit-month"><i class="fas fa-edit"></i></button>
      `;

            // Append the new timeline-month element to the timeline
            document
              .querySelector(".timeline")
              .appendChild(timelineMonthElement);
          }

          // Function to update the timeline based on video timestamp
          function updateTimeline() {
            var currentTime = player.getCurrentTime();
            var percentage = (currentTime / player.getDuration()) * 100;

            // Update the timeline-month element's style to match the video progress
            timelineMonthElement.style.width = percentage + "%";
          }

          // Function to get a formatted month-year string from the video timestamp
          function getMonthYearString(timestamp) {
            var date = new Date(timestamp * 1000); // Convert timestamp to milliseconds
            var month = date.toLocaleString("default", { month: "long" });
            var year = date.getFullYear();
            return `${month}, ${year}`;
          }

          // YouTube Player API callback function
          window.onYouTubeIframeAPIReady = function () {
            player = new YT.Player("player", {
              height: "360",
              width: "640",
              videoId: videoId,
              events: {
                onReady: function (event) {
                  // Get the initial timestamp and create the timeline-month element
                  createTimelineMonth(player.getDuration());
                },
                onStateChange: function (event) {
                  if (event.data == YT.PlayerState.PLAYING) {
                    // Update the timeline continuously when the video is playing
                    setInterval(updateTimeline, 1000);
                  }
                },
              },
            });
          };

          // Event listener for the "Edit" button in the created timeline-month element
          document.addEventListener("click", function (event) {
            if (event.target.classList.contains("edit-month")) {
              // Implement your edit month logic here
              alert("Edit month functionality goes here!");
            }
          });
        });
      </script>
    </div>
  </body>
</html>
